{"version":3,"sources":["webpack:///./src/views/Hot.vue?cce3","webpack:///src/views/Hot.vue","webpack:///./src/views/Hot.vue?1603","webpack:///./src/views/Hot.vue","webpack:///./src/views/Hot.vue?7af1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","scroll","_v","_s","time","_l","item","index","key","class","lt3","attrs","currentSongId","playing","$event","$emit","hotLis","_e","staticRenderFns","components","songListItem","props","type","Number","Boolean","data","detail","page","loading","privileges","methods","setTimeout","console","log","getPlayListDetail","created","component"],"mappings":"gHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQC,GAAG,CAAC,OAASP,EAAIQ,SAAS,CAACJ,EAAG,UAAU,CAACE,YAAY,MAAM,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACN,EAAIS,GAAG,QAAQT,EAAIU,GAAGV,EAAIW,WAAYX,EAAU,OAAEI,EAAG,KAAKJ,EAAIY,GAAIZ,EAAU,QAAE,SAASa,EAAKC,GAAO,OAAOV,EAAG,eAAe,CAACW,IAAID,EAAME,MAAM,CAAEC,IAAKH,EAAQ,GAAII,MAAM,CAAC,KAAOL,EAAK,cAAgBb,EAAImB,cAAc,QAAUnB,EAAIoB,SAASb,GAAG,CAAC,sBAAsB,SAASc,GAAQrB,EAAIsB,MAAM,sBAAuBT,GAC5gBb,EAAIsB,MAAM,2BAA4BtB,EAAIuB,WAAY,CAACvB,EAAIS,GAAGT,EAAIU,GAAGI,EAAQ,SAAQ,GAAGd,EAAIwB,KAAMxB,EAAW,QAAEI,EAAG,WAAWJ,EAAIwB,MAAM,IAC3IC,EAAkB,G,gEC0BtB,GACEC,WAAY,CACVC,aAAJ,QAEEC,MAAO,CACLT,cAAe,CACbU,KAAMC,QAERV,QAASW,SAEXC,KAAM,WACJ,MAAO,CACLC,OAAQ,KACRC,KAAM,EACNvB,KAAM,GACNY,OAAQ,GACRY,SAAS,EACTC,WAAN,KAGEC,QAAS,CACP7B,OAAQ,SAAZ,cAEA,sDACA,uBACA,uDACA,wBAEQP,KAAKkC,SAAU,EACfG,YAAW,WACT,EAAV,OACU,IAAK,IAAf,wBACY,EAAZ,yBAGUC,QAAQC,IAAI,MACZ,EAAV,aACA,QAIIC,kBAAmB,SAAvB,cACMxC,KAAKkC,SAAU,EACfG,YAAW,WACT,EAAR,WACQ,EAAR,MACA,wBACU,OAAV,CACY,GAAZ,KAGA,kBACU,EAAV,8BACU,EAAV,6BACU,EAAV,OACU,IAAV,wBACY,EAAZ,yBAEU,IAAV,6BACA,aACA,WACA,iBACA,cACA,MACA,YACU,GAAV,IACY,EAAZ,KACA,6BACA,IACA,6BACA,KACA,4CACA,WACA,QACY,IAAZ,eACY,EAAZ,KACA,6BACA,KACA,gCACA,KACA,4CACA,aAGA,QAGEI,QAAS,WACPzC,KAAKwC,kBAAkB,WCpHkT,I,wBCQzUE,EAAY,eACd,EACA5C,EACA0B,GACA,EACA,KACA,WACA,MAIa,aAAAkB,E,2CCnBf,W","file":"js/about.c215f4f3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\",on:{\"scroll\":_vm.scroll}},[_c('section',{staticClass:\"bg\"},[_c('div',{staticClass:\"hottime\"},[_vm._v(\"更新时间：\"+_vm._s(_vm.time))])]),(_vm.detail)?_c('ul',_vm._l((_vm.hotLis),function(item,index){return _c('songListItem',{key:index,class:{ lt3: index < 3 },attrs:{\"item\":item,\"currentSongId\":_vm.currentSongId,\"playing\":_vm.playing},on:{\"change-current-song\":function($event){_vm.$emit('change-current-song', item);\n        _vm.$emit('change-current-play-list', _vm.hotLis);}}},[_vm._v(_vm._s(index + 1))])}),1):_vm._e(),(_vm.loading)?_c('loading'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"about\" @scroll=\"scroll\">\n    <section class=\"bg\">\n      <div class=\"hottime\">更新时间：{{ time }}</div>\n    </section>\n\n    <ul v-if=\"detail\">\n      <songListItem\n        v-for=\"(item, index) in hotLis\"\n        :key=\"index\"\n        :item=\"item\"\n        @change-current-song=\"\n          $emit('change-current-song', item);\n          $emit('change-current-play-list', hotLis);\n        \"\n        :currentSongId=\"currentSongId\"\n        :playing=\"playing\"\n        :class=\"{ lt3: index < 3 }\"\n        >{{ index + 1 }}</songListItem\n      >\n    </ul>\n    <loading v-if=\"loading\"></loading>\n  </div>\n</template>\n\n<script>\n// import _ from 'lodash'\nimport songListItem from \"@/components/songListItem.vue\";\nexport default {\n  components: {\n    songListItem,\n  },\n  props: {\n    currentSongId: {\n      type: Number,\n    },\n    playing: Boolean,\n  },\n  data: function () {\n    return {\n      detail: null,\n      page: 0,\n      time: \"\",\n      hotLis: [],\n      loading: false,\n      privileges:\"\",\n    };\n  },\n  methods: {\n    scroll: function (event) {\n      if (\n        Math.ceil(event.target.offsetHeight + event.target.scrollTop) ===\n          event.target.scrollHeight ||\n        Math.floor(event.target.offsetHeight + event.target.scrollTop) ===\n          event.target.scrollHeight\n      ) {\n        this.loading = true;\n        setTimeout(() => {\n          this.page++;\n          for (let i = this.page; i < this.page * 5; i++) {\n            this.hotLis.push(this.detail[i]);\n            // console.log(this.page);\n          }\n          console.log(\"触底\");\n          this.loading = false;\n        }, 1500);\n      }\n    },\n\n    getPlayListDetail: function (id) {\n      this.loading = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.axios\n          .get(\"/playlist/detail\", {\n            params: {\n              id,\n            },\n          })\n          .then((res) => {\n            this.detail = res.data.playlist.tracks;\n            this.privileges = res.data.privileges;\n            this.page++;\n            for (let i = 0; i < this.page * 10; i++) {\n              this.hotLis.push(this.detail[i]);\n            }\n            var date = res.data.playlist.updateTime;\n            var nowDateMilliSecond = Date.now();\n            var now = new Date();\n            var NMonth = now.getMonth() + 1;\n            var NDate = now.getDate();\n            var gap = nowDateMilliSecond - date;\n            var gapDayCount = gap / 3600000 / 24;\n            if (gapDayCount < 1) {\n              this.time =\n                NMonth.toString().padStart(2, \"0\") +\n                \"年\" +\n                NDate.toString().padStart(2, \"0\") +\n                \"日\" +\n                (gapDayCount.toFixed(1) * 10).toString().padStart(2, \"0\") +\n                \"小时前\";\n            } else if (gapDayCount > 1) {\n              let gapday = gapDayCount.toFixed(0);\n              this.time =\n                NMonth.toString().padStart(2, \"0\") +\n                \"月\" +\n                (NDate - gapday).toString().padStart(2, \"0\") +\n                \"日\" +\n                (gapDayCount.toFixed(1) * 10).toString().padStart(2, \"0\") +\n                \"小时前 \";\n            }\n          });\n      }, 1500);\n    },\n  },\n  created: function () {\n    this.getPlayListDetail(3778678);\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.about {\n  margin-top: 11px;\n  .bg {\n    width: 100%;\n    height: 162px;\n    background: url(\"https://s3.music.126.net/mobile-new/img/hot_music_bg_3x.jpg?2bfefd3ba37eaffbd66b7d108b9de26a=\");\n    background-size: cover;\n    filter: saturate(0.9);\n    overflow: hidden;\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    flex-direction: column;\n    padding-left: 20px;\n    &::before {\n      content: \"\";\n      display: block;\n      background: url(\"https://s3.music.126.net/mobile-new/img/index_icon_2x.png?5207a28c3767992ca4bb6d4887c74880=\")\n        no-repeat;\n      background-size: 166px 97px;\n      background-position: -24px -30px;\n      width: 166px;\n      height: 75px;\n    }\n    .hottime {\n      color: #fff;\n      font-size: 11.5px;\n    }\n  }\n}\n.loading{\n            width: 150px;\n            height: 15px;\n            margin: 0 auto;\n            margin-top:100px;\n        }\n        .loading span{\n            display: inline-block;\n            width: 15px;\n            height: 100%;\n            margin-right: 5px;\n            background: lightgreen;\n            -webkit-transform-origin: right bottom;\n            -webkit-animation: load 1s ease infinite;\n        }\n        .loading span:last-child{\n            margin-right: 0px; \n        }\n        @-webkit-keyframes load{\n            0%{\n                opacity: 1;\n                -webkit-transform: scale(1);\n            }\n            100%{\n                opacity: 0;\n                -webkit-transform: rotate(90deg) scale(.3);\n            }\n        }\n        .loading span:nth-child(1){\n            -webkit-animation-delay:0.13s;\n        }\n        .loading span:nth-child(2){\n            -webkit-animation-delay:0.26s;\n        }\n        .loading span:nth-child(3){\n            -webkit-animation-delay:0.39s;\n        }\n        .loading span:nth-child(4){\n            -webkit-animation-delay:0.52s;\n        }\n        .loading span:nth-child(5){\n            -webkit-animation-delay:0.65s;\n        }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Hot.vue?vue&type=template&id=539a389a&scoped=true&\"\nimport script from \"./Hot.vue?vue&type=script&lang=js&\"\nexport * from \"./Hot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Hot.vue?vue&type=style&index=0&id=539a389a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"539a389a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hot.vue?vue&type=style&index=0&id=539a389a&lang=less&scoped=true&\""],"sourceRoot":""}